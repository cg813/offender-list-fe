"use strict";(self["webpackChunkoffender"]=self["webpackChunkoffender"]||[]).push([[219],{7219:function(t,e,s){s.r(e),s.d(e,{default:function(){return q}});s(7658);var l=s(6252),a=s(3577),i=s(2262),o=s(3560),c=s(9530),n=s(2244),p=s(2201),r=s(3002);const d=t=>((0,l.dD)("data-v-8b3c8ade"),t=t(),(0,l.Cn)(),t),m={class:"bg-gray-900"},x={class:"mx-auto members"},w={class:"bg-gray-900 py-20"},u={class:""},f=d((()=>(0,l._)("div",{class:"sm:flex sm:items-center"},[(0,l._)("div",{class:"sm:flex-auto"},[(0,l._)("h1",{class:"text-2xl font-semibold leading-6 text-white"},"Members"),(0,l._)("p",{class:"mt-2 text-sm text-gray-300"},"List of all the users")])],-1))),h={class:"mt-8 flow-root"},_={class:"-my-2 overflow-x-auto"},y={class:"inline-block min-w-full py-2 align-middle"},v={class:"min-w-full divide-y divide-gray-700"},g=d((()=>(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-white sm:pl-0"},"Name"),(0,l._)("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-white sm:pl-0"},"Email"),(0,l._)("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-white"},"Plan"),(0,l._)("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-white"},"Rows Total"),(0,l._)("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-white"},"Rows Remaining"),(0,l._)("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-white"},"Reset Password")])],-1))),b={class:"divide-y divide-gray-800"},k={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-white sm:pl-0"},z={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-white sm:pl-0"},R={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-300 capitalize"},C={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-300"},D={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-300"},P=["onClick"];var I=(0,l.aZ)({__name:"Users",setup(t){const e=(0,o.L)(),s=(0,c.W)(),d=(0,p.tv)(),I=(0,r.pm)(),L=(0,i.iH)([]);(0,l.bv)((async()=>{if(!e.userId)return;const t=await e.fetchAllUser();L.value=t?.filter((t=>t._id!==e.userId)),s.plans.length||await s.fetchPlans()})),(0,l.YP)((()=>e.isLoading),(()=>{e.isLoading||e.user?.role===n.u.ADMIN||d.push("/detect")}));const N=(0,l.Fl)((()=>s.plans)),q=t=>{const e=N.value.find((e=>e._id===t));return e||null},E=async t=>{const s=await e.resetPasswordEmail(t,!0);s?I.success("Sent email!"):I.error("Something went wrong!")};return(t,e)=>((0,l.wg)(),(0,l.iD)("div",m,[(0,l._)("div",x,[(0,l._)("div",w,[(0,l._)("div",u,[f,(0,l._)("div",h,[(0,l._)("div",_,[(0,l._)("div",y,[(0,l._)("table",v,[g,(0,l._)("tbody",b,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(L.value,(t=>((0,l.wg)(),(0,l.iD)("tr",{key:t.email},[(0,l._)("td",k,(0,a.zw)(t.userName),1),(0,l._)("td",z,(0,a.zw)(t.email),1),(0,l._)("td",R,(0,a.zw)(q(t.plan)?.name),1),(0,l._)("td",C,(0,a.zw)(`${q(t.plan)?.requests} / ${q(t.plan)?.frequency}`),1),(0,l._)("td",D,(0,a.zw)(t.availableRequests),1),(0,l._)("td",{class:"whitespace-nowrap px-3 py-4 text-sm text-gray-300 cursor-pointer",onClick:e=>E(t.userName)}," Send Reset Email ",8,P)])))),128))])])])])])])])])]))}}),L=s(3744);const N=(0,L.Z)(I,[["__scopeId","data-v-8b3c8ade"]]);var q=N}}]);