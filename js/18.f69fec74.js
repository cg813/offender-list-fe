"use strict";(self["webpackChunkoffender"]=self["webpackChunkoffender"]||[]).push([[18],{6018:function(e,s,i){i.r(s),i.d(s,{default:function(){return D}});i(7658);var t=i(6252),l=i(9963),a=i(2262),n=i(3577),o=i(3560),r=i(9530),d=i(3002),u=i(2244),m=i(2201);const c={class:"flex flex-1 flex-col justify-center px-6 py-20"},g=(0,t._)("div",{class:"sm:mx-auto sm:w-full sm:max-w-sm"},[(0,t._)("h2",{class:"text-center text-2xl font-bold leading-9 tracking-tight text-white"},"Register a new user")],-1),w={class:"mt-10 sm:mx-auto sm:w-full sm:max-w-sm"},p=["onSubmit"],f=(0,t._)("label",{for:"userName",class:"block text-sm font-medium leading-6 text-white"},"User Name",-1),b={class:"mt-2"},x=(0,t._)("label",{for:"email",class:"block text-sm font-medium leading-6 text-white"},"Email",-1),h={class:"mt-2"},v=(0,t._)("div",{class:""},[(0,t._)("label",{for:"password",class:"block text-sm font-medium leading-6 text-white"},"Password")],-1),_={class:"mt-2"},y=(0,t._)("label",{for:"role",class:"block text-sm font-medium leading-6 text-white"},"Role",-1),k=["value"],N=["value"],U=(0,t._)("label",{for:"plan",class:"block text-sm font-medium leading-6 text-white"},"Plan",-1),S=["value"],q=["disabled"];var z=(0,t.aZ)({__name:"Signup",setup(e){const s=(0,o.L)(),i=(0,r.W)(),z=(0,m.tv)(),R=(0,d.pm)(),D=(0,t.Fl)((()=>i.plans)),M=(0,a.qj)({userName:"",email:"",password:"",role:u.u.USER,plan:D.value[0]?._id||""});(0,t.bv)((async()=>{i.plans.length||await i.fetchPlans()}));const P=(0,t.Fl)((()=>!!(M.userName&&M.email&&M.password)));(0,t.YP)((()=>s.isLoading),(()=>{s.isLoading||s.user?.role===u.u.ADMIN||z.push("/detect")}));const V=async()=>{const e=D.value.find((e=>e._id===M.plan));if(!e)return void R.error("Incorrect Plan!");const i={userName:M.userName,email:M.email,password:M.password,role:M.role,plan:M.plan,availableRequests:e.requests},t=await s.register(i);t?(R.success("User added successfully!"),M.userName="",M.password="",M.email=""):R.error("Something went wrong!")};return(e,s)=>((0,t.wg)(),(0,t.iD)("div",c,[g,(0,t._)("div",w,[(0,t._)("form",{class:"space-y-6",onSubmit:(0,l.iM)(V,["prevent"])},[(0,t._)("div",null,[f,(0,t._)("div",b,[(0,t.wy)((0,t._)("input",{id:"userName",name:"userName","onUpdate:modelValue":s[0]||(s[0]=e=>M.userName=e),type:"text",required:!0,class:"block w-full rounded-md border-0 bg-white bg-opacity-5 py-1.5 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-indigo-500 sm:text-sm sm:leading-6"},null,512),[[l.nr,M.userName]])])]),(0,t._)("div",null,[x,(0,t._)("div",h,[(0,t.wy)((0,t._)("input",{id:"email",name:"email","onUpdate:modelValue":s[1]||(s[1]=e=>M.email=e),type:"email",required:!0,class:"block w-full rounded-md border-0 bg-white bg-opacity-5 py-1.5 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-indigo-500 sm:text-sm sm:leading-6"},null,512),[[l.nr,M.email]])])]),(0,t._)("div",null,[v,(0,t._)("div",_,[(0,t.wy)((0,t._)("input",{id:"password",name:"password","onUpdate:modelValue":s[2]||(s[2]=e=>M.password=e),type:"password",autocomplete:"current-password",required:!0,class:"block w-full rounded-md border-0 bg-white bg-opacity-5 py-1.5 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-indigo-500 sm:text-sm sm:leading-6"},null,512),[[l.nr,M.password]])])]),(0,t._)("div",null,[y,(0,t.wy)((0,t._)("select",{id:"role",name:"role","onUpdate:modelValue":s[3]||(s[3]=e=>M.role=e),class:"mt-2 capitalize block w-full rounded-md border-0 bg-white bg-opacity-5 py-1.5 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-indigo-500 sm:text-sm sm:leading-6"},[(0,t._)("option",{value:(0,a.SU)(u.u).USER,class:"capitalize text-black"},(0,n.zw)((0,a.SU)(u.u).USER),9,k),(0,t._)("option",{value:(0,a.SU)(u.u).ADMIN,class:"capitalize text-black"},(0,n.zw)((0,a.SU)(u.u).ADMIN),9,N)],512),[[l.bM,M.role]])]),(0,t._)("div",null,[U,(0,t.wy)((0,t._)("select",{id:"plan",name:"plan","onUpdate:modelValue":s[4]||(s[4]=e=>M.plan=e),class:"mt-2 capitalize block w-full rounded-md border-0 bg-white bg-opacity-5 py-1.5 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-indigo-500 sm:text-sm sm:leading-6"},[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(D.value,(e=>((0,t.wg)(),(0,t.iD)("option",{key:e._id,value:e._id,class:"capitalize text-black"},(0,n.zw)(`${e.name}: ${e.requests} rows per ${e.frequency} `),9,S)))),128))],512),[[l.bM,M.plan]])]),(0,t._)("div",null,[(0,t._)("button",{type:"submit",class:"flex w-full justify-center rounded-md bg-indigo-500 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-indigo-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-500 disabled:opacity-50 mt-10",disabled:!P.value}," Register ",8,q)])],40,p)])]))}});const R=z;var D=R}}]);